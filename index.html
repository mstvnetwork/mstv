<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="MSTV Network offers a variety of live TV channels including music, movies, and more. Watch your favorite channels online for free.">
    <meta name="keywords" content="live TV, MSTV Network, free TV, live channels, streaming, music, bollywood, saga music">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="MSTV Network">
    <meta property="og:description" content="Stream live TV channels including music, movies, and more on MSTV Network.">
    <meta property="og:image" content="https://raw.githubusercontent.com">
    <meta property="og:url" content="https://mstvnet.netlify.app">

    <!-- JSON-LD Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "MSTV Network",
        "url": "https://mstvnet.netlify.app"
    }
    </script>
    
    <title>MSTV Network</title>

    <!-- HLS Library -->
    <script src="https://cdn.jsdelivr.net"></script>

    <style>
       body { margin: 0; padding: 0; font-family: 'Poppins', sans-serif; color: #E0E0E0; background: #0F1115; }
       .title-3d { font-size: 3.5em; text-align: center; margin-top: 40px; margin-bottom: 20px; color: #FFFFFF; font-weight: 700; }
       
       /* Search & Selection Container */
       .controls-container { display: flex; flex-direction: column; align-items: center; gap: 15px; margin-bottom: 30px; }
       
       #search-bar {
           padding: 12px 20px; width: 90%; max-width: 450px; background: #1A1D20; border: 1px solid #444;
           border-radius: 8px; color: white; font-size: 1em; outline: none; transition: border 0.3s;
       }
       #search-bar:focus { border-color: #90EE90; }

       select { 
           padding: 0.7em 1.5em; font-size: 1.2em; background: #1A1D20; color: #90EE90; 
           border: 1px solid #90EE90; border-radius: 8px; width: 90%; max-width: 450px; 
           text-align: center; cursor: pointer; outline: none;
       }

       .player-container { 
           position: relative; width: 90%; max-width: 1100px; aspect-ratio: 16 / 9; 
           margin: 0 auto 60px; border-radius: 12px; overflow: hidden; background: #000;
           box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5); 
       }
       
       iframe, video, #placeholder-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }

       /* Loading Spinner */
       .spinner {
           border: 4px solid rgba(255, 255, 255, 0.1); border-left-color: #90EE90;
           border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite;
           position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none; z-index: 20;
       }
       @keyframes spin { to { transform: translate(-50%, -50%) rotate(360deg); } }

       #error-msg {
           position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
           color: #ff4444; font-weight: 600; display: none; z-index: 21; background: rgba(0,0,0,0.7); padding: 10px 20px; border-radius: 5px;
       }

       .scrolling-container { width: 100%; overflow: hidden; background: #1A1D20; padding: 15px 0; margin-bottom: 20px; }
       .scrolling-content { display: inline-flex; gap: 40px; padding-left: 100%; white-space: nowrap; animation: scroll-text 40s linear infinite; color: #90EE90; }
       @keyframes scroll-text { 0% { transform: translateX(0%); } 100% { transform: translateX(-100%); } }

       .live-stamp { position: absolute; top: 15px; left: 15px; background: #E50914; color: white; padding: 4px 12px; border-radius: 4px; font-weight: 700; z-index: 10; }
       footer { padding: 40px; background: #1A1D20; text-align: center; border-top: 1px solid #333; }
    </style>
</head>
<body>

   <div class="title-3d">AAINA DTH FREE</div>
    
   <div class="scrolling-container">
      <div class="scrolling-content">üåç AAINA DTH FREE‚Äì Your Gateway to Free Live TV! Music, Movies, Drama & More!</div>
   </div>
    
   <div class="controls-container">
      <input type="text" id="search-bar" placeholder="üîç Search channel name...">
      <select id="channel-select">
         <option value="">üëâüì∫ Select Channel</option>
      </select>
   </div>
        
   <div class="player-container" id="player-container">
          <iframe id="media-player" style="display:none;" allow="autoplay; encrypted-media; fullscreen"></iframe>
          <video id="video-player" autoplay playsinline style="display:none;"></video>
          <img id="placeholder-image" src="https://raw.githubusercontent.com" alt="Placeholder" />
          
          <div class="live-stamp" id="live-stamp" style="display:none;">LIVE</div>
          <div class="spinner" id="loading-spinner"></div>
          <div id="error-msg">Channel Offline</div>
   </div>
     
   <footer>
      <div class="copyright">¬© 2025 MSTV INDIA. All rights reserved.</div>
   </footer>

   <script>
        const select = document.getElementById('channel-select');
        const searchBar = document.getElementById('search-bar');
        const videoPlayer = document.getElementById('video-player');
        const iframePlayer = document.getElementById('media-player');
        const placeholder = document.getElementById('placeholder-image');
        const spinner = document.getElementById('loading-spinner');
        const errorMsg = document.getElementById('error-msg');
        const liveStamp = document.getElementById('live-stamp');
        const playerBox = document.getElementById('player-container');
      
        let hlsInstance = null;
        let channelsData = [];
        const JSON_URL = "/mstv/channels.json";

        async function fetchChannels() {
          try {
            const response = await fetch(`${JSON_URL}?t=${Date.now()}`);
            channelsData = await response.json();
            renderList(""); 
          } catch (e) { console.error('JSON Error:', e); }
        }

        function renderList(filter) {
            const currentVal = select.value;
            select.innerHTML = '<option value="">üëâüì∫ Select Channel</option>';
            channelsData.forEach((ch, index) => {
                if (ch.name.toLowerCase().includes(filter.toLowerCase())) {
                    const opt = document.createElement('option');
                    opt.value = index;
                    opt.textContent = ch.name;
                    select.appendChild(opt);
                }
            });
            select.value = currentVal;
        }

        searchBar.addEventListener('input', (e) => renderList(e.target.value));

        function playChannel(channel) {
            spinner.style.display = 'block';
            errorMsg.style.display = 'none';
            placeholder.style.display = 'none';
            liveStamp.style.display = 'none';
            
            if (hlsInstance) { hlsInstance.destroy(); hlsInstance = null; }
            videoPlayer.pause(); videoPlayer.style.display = 'none';
            iframePlayer.style.display = 'none'; iframePlayer.src = '';

            if (!channel) { placeholder.style.display = 'block'; spinner.style.display = 'none'; return; }

            // AUTO FULLSCREEN logic
            if (playerBox.requestFullscreen) { playerBox.requestFullscreen(); }
            else if (playerBox.webkitRequestFullscreen) { playerBox.webkitRequestFullscreen(); }

            if (channel.type === 'hls') {
                videoPlayer.style.display = 'block';
                if (typeof Hls !== 'undefined' && Hls.isSupported()) {
                    hlsInstance = new Hls();
                    hlsInstance.loadSource(channel.url);
                    hlsInstance.attachMedia(videoPlayer);
                    hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => { videoPlayer.play(); spinner.style.display = 'none'; liveStamp.style.display = 'block'; });
                    hlsInstance.on(Hls.Events.ERROR, () => { spinner.style.display = 'none'; errorMsg.style.display = 'block'; });
                } else {
                    videoPlayer.src = channel.url;
                    videoPlayer.play().then(() => { spinner.style.display = 'none'; liveStamp.style.display = 'block'; }).catch(() => { errorMsg.style.display = 'block'; });
                }
            } else {
                iframePlayer.src = channel.url;
                iframePlayer.style.display = 'block';
                iframePlayer.onload = () => { spinner.style.display = 'none'; liveStamp.style.display = 'block'; };
            }
        }

        select.addEventListener('change', () => playChannel(channelsData[select.value]));

        fetchChannels();
        setInterval(fetchChannels, 20000);
   </script>

   <!-- GoatCounter Script -->
   <script>
      if (!location.search.includes('dev=1')) {
          const s = document.createElement('script');
          s.setAttribute('data-goatcounter', 'https://mstv.goatcounter.com');
          s.src = 'https://gc.zgo.at';
          s.async = true;
          document.head.appendChild(s);
      }
   </script>
</body>
</html>
