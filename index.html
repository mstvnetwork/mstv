<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>MSTV Network</title>

  <!-- SEO Meta -->
  <meta name="description" content="MSTV Network offers a variety of live TV channels including music, movies, and more. Watch your favorite channels online for free." />
  <meta name="keywords" content="live TV, MSTV Network, free TV, live channels, streaming, music, bollywood, saga music" />
  <meta name="robots" content="index, follow" />

  <!-- Social Media Meta -->
  <meta property="og:title" content="MSTV Network" />
  <meta property="og:description" content="Stream live TV channels including music, movies, and more on MSTV Network." />
  <meta property="og:image" content="https://mstvnet.netlify.app/logo.png" />
  <meta property="og:url" content="https://mstvnet.netlify.app/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="MSTV Network" />
  <meta name="twitter:description" content="Stream live TV channels including music, movies, and more on MSTV Network." />
  <meta name="twitter:image" content="https://mstvnet.netlify.app/logo.png" />
  <meta name="twitter:url" content="https://mstvnet.netlify.app/" />

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "MSTV Network",
    "description": "Stream live TV channels including music, movies, and more.",
    "url": "https://mstvnet.netlify.app/",
    "publisher": {
      "@type": "Organization",
      "name": "MSTV Network",
      "logo": {
        "@type": "ImageObject",
        "url": "https://mstvnet.netlify.app/logo.png"
      }
    }
  }
  </script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6MHRH7TE5Y"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6MHRH7TE5Y');
  </script>

  <!-- Styling -->
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      color: #fff;
      background: linear-gradient(145deg, #1A0D3C, #3F0057);
    }

    .title-3d {
      font-size: 3em;
      text-align: center;
      margin-top: 30px;
      color: #00ffe7;
      text-shadow: 0 0 10px #00ffe7, 0 0 20px #0ff, 0 0 30px #0ff;
      animation: glow 2s infinite alternate;
    }

    @keyframes glow {
      0% { text-shadow: 0 0 10px #00ffe7, 0 0 20px #0ff; }
      100% { text-shadow: 0 0 20px #00ffe7, 0 0 30px #0ff; }
    }

    .scrolling-text {
      overflow: hidden;
      white-space: nowrap;
      padding: 12px 0;
      margin: 20px 0;
      background: rgba(255, 255, 255, 0.05);
      border-top: 2px solid #00ffe7;
      border-bottom: 2px solid #00ffe7;
    }

    .scrolling-content {
      display: inline-block;
      padding-left: 100%;
      animation: scroll-text 15s linear infinite;
      font-size: 1.3em;
      color: #00ffe7;
    }

    @keyframes scroll-text {
      0% { transform: translateX(0%); }
      100% { transform: translateX(-100%); }
    }

    .channel-selector-text {
      text-align: center;
      font-size: 1.6em;
      margin: 2vh 0 1vh;
      color: #ff4fd8;
    }

    .channel-selection {
      display: flex;
      justify-content: center;
      margin-bottom: 2vh;
    }

    select {
      padding: 0.5em 1em;
      font-size: 1.1em;
      background: #111;
      color: #0ff;
      border: 2px solid #0ff;
      border-radius: 15px;
      outline: none;
      width: 90%;
      max-width: 400px;
      text-align: center;
    }

    .player-container {
      position: relative;
      width: 90%;
      max-width: 1000px;
      aspect-ratio: 16 / 9;
      margin: 0 auto 40px;
      border: 4px solid;
      border-radius: 20px;
      overflow: hidden;
      background: #000;
      animation: borderPulse 4s ease-in-out infinite;
    }

    @keyframes borderPulse {
      0%,100% { border-color: #ff4fd8; box-shadow: 0 0 15px #ff4fd8; }
      25% { border-color: #00ffe7; box-shadow: 0 0 30px #00ffe7; }
      75% { border-color: #f7ff00; box-shadow: 0 0 30px #f7ff00; }
    }

    .player-container iframe,
    .player-container video,
    .player-container img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .live-stamp {
      position: absolute;
      top: 5px;
      left: 5px;
      background: #ff003c;
      color: white;
      padding: 8px 12px;
      font-weight: bold;
      font-size: 0.9em;
      border-radius: 5px;
      z-index: 10;
      box-shadow: 0 0 10px #ff003c;
    }

    .loading-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.5em;
      background: rgba(0, 0, 0, 0.85);
      color: #ffcc00;
      padding: 15px 30px;
      border-radius: 12px;
      display: none;
      z-index: 15;
      animation: glowLoader 1.5s infinite alternate;
    }

    @keyframes glowLoader {
      0% { box-shadow: 0 0 5px #ffcc00; }
      100% { box-shadow: 0 0 15px #ffcc00; }
    }

    .logo-overlay {
      position: absolute;
      bottom: 10px;
      right: 10px;
      width: 60px;
      opacity: 0.85;
      z-index: 12;
    }
  </style>
</head>
<body>
  <div class="title-3d">MSTV NETWORK - Free 24/7 Streaming</div>

  <div class="scrolling-text">
    <div class="scrolling-content">Welcome to MSTV Network â€“ Refresh page to auto-tune channels!</div>
  </div>

  <div class="channel-selector-text">Select Channel</div>
  <div class="channel-selection">
    <select id="channel-select"><option value="">ðŸ‘‰ðŸ“ºðŸ“ºðŸ“º</option></select>
  </div>

  <div class="player-container" id="player-container">
    <iframe id="media-player" allow="autoplay; encrypted-media" sandbox="allow-scripts allow-same-origin allow-presentation"></iframe>
    <video id="video-player" autoplay playsinline controlsList="nodownload nofullscreen noremote" disablePictureInPicture></video>
    <img id="placeholder-image" src="Design-Studio-2025-01-22 (1).png" alt="Stream Placeholder" />
    <div class="live-stamp">MSTV LIVE</div>
    <div class="loading-indicator" id="loading">Loading stream...</div>
    <img src="logo.png" class="logo-overlay" alt="MSTV Logo" />
  </div>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const select = document.getElementById('channel-select');
    const video = document.getElementById('video-player');
    const iframe = document.getElementById('media-player');
    const placeholder = document.getElementById('placeholder-image');
    const loading = document.getElementById('loading');
    let hls = null;
    let channels = [];

    function showLoading(state) {
      loading.style.display = state ? 'block' : 'none';
    }

    function stopAll() {
      if (hls) {
        hls.destroy();
        hls = null;
      }
      video.pause();
      video.removeAttribute('src');
      video.load();
      video.style.display = 'none';

      iframe.src = '';
      iframe.style.display = 'none';
    }

    function play(channel) {
      stopAll();
      placeholder.style.display = 'none';
      showLoading(true);

      if (!channel || !channel.url) {
        placeholder.style.display = 'block';
        showLoading(false);
        return;
      }

      if (channel.type === 'hls') {
        if (Hls.isSupported()) {
          video.style.display = 'block';
          video.muted = false;
          video.volume = 1;
          hls = new Hls();
          hls.loadSource(channel.url);
          hls.attachMedia(video);
          hls.on(Hls.Events.MANIFEST_PARSED, () => {
            video.play().then(() => showLoading(false));
          });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
          video.src = channel.url;
          video.style.display = 'block';
          video.muted = false;
          video.play().then(() => showLoading(false));
        }
      } else if (channel.type === 'iframe') {
        iframe.src = channel.url;
        iframe.style.display = 'block';
        showLoading(false);
      }
    }

    async function fetchChannels() {
      try {
        const res = await fetch('channels.json?t=' + Date.now());
        const json = await res.json();
        if (JSON.stringify(json) !== JSON.stringify(channels)) {
          channels = json;
          select.innerHTML = '<option value="">ðŸ‘‰ðŸ“ºðŸ“ºðŸ“º</option>';
          json.forEach((ch, i) => {
            const opt = document.createElement('option');
            opt.value = i;
            opt.textContent = ch.name;
            select.appendChild(opt);
          });

          const last = localStorage.getItem('lastChannelIndex');
          const index = last && json[last] ? last : 0;
          select.value = index;
          play(json[index]);
        }
      } catch (err) {
        console.error('Error fetching channels.json:', err);
      }
    }

    select.addEventListener('change', () => {
      const index = select.value;
      localStorage.setItem('lastChannelIndex', index);
      play(channels[index]);
    });

    fetchChannels();
    setInterval(fetchChannels, 5000);
  </script>
</body>
</html>
