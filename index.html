<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>MSTV Network</title>
  <meta name="description" content="MSTV Network offers a variety of live TV channels including music, movies, and more. Watch your favorite channels online for free." />
  <meta name="keywords" content="live TV, MSTV Network, free TV, live channels, streaming, music, bollywood, saga music" />
  <meta name="robots" content="index, follow" />
  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="MSTV Network" />
  <meta property="og:description" content="Stream live TV channels including music, movies, and more on MSTV Network." />
  <meta property="og:image" content="https://mstvnet.netlify.app/logo.png" />
  <meta property="og:url" content="https://mstvnet.netlify.app/" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="MSTV Network" />
  <meta name="twitter:description" content="Stream live TV channels including music, movies, and more on MSTV Network." />
  <meta name="twitter:image" content="https://mstvnet.netlify.app/logo.png" />
  <meta name="twitter:url" content="https://mstvnet.netlify.app/" />
  <!-- Structured Data / JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "MSTV Network",
    "description": "Stream live TV channels including music, movies, and more.",
    "url": "https://mstvnet.netlify.app/",
    "publisher": {
      "@type": "Organization",
      "name": "MSTV Network",
      "logo": {
        "@type": "ImageObject",
        "url": "https://mstvnet.netlify.app/logo.png"
      }
    }
  }
  </script>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6MHRH7TE5Y"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-6MHRH7TE5Y');
  </script>
  <style>
    /* Your existing CSS styles here */
  </style>
</head>
<body>
  <div class="title-3d">MSTV INDIA</div>
  <div class="scrolling-text">
    <div class="scrolling-content">Welcome to MSTV India - Refresh the webpage to auto-tune channels!</div>
  </div>
  <div class="channel-selector-text">Select Channel</div>
  <div class="channel-selection">
    <select id="channel-select">
      <option value="">ðŸ‘‰ðŸ“ºðŸ“ºðŸ“º</option>
    </select>
  </div>
  <div class="player-container" id="player-container">
    <iframe id="media-player" allow="autoplay; encrypted-media; picture-in-picture" sandbox="allow-scripts allow-same-origin allow-presentation" title="Media Player"></iframe>
    <video id="video-player" autoplay playsinline controlsList="nodownload nofullscreen noremote" disablePictureInPicture></video>
    <img id="placeholder-image" src="Design-Studio-2025-01-22 (1).png" alt="Stream Placeholder" />
    <div class="live-stamp">MSTV NETWORK</div>
    <div class="loading-indicator" id="loading">Loading stream...</div>
    <img src="/logo.png" class="logo-overlay" alt="MSTV Logo" />
  </div>
  <div class="partner-logos">
    <img src="logo.img/images.png" alt="Partner Logo 1" />
    <img src="logo.img/images (3).jpeg" alt="Partner Logo 3" />
  </div>
  <div class="facebook-follow">
    <a href="https://www.facebook.com/share/16VZyWirq4/" target="_blank" rel="noopener noreferrer">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook Icon" />
      Follow us on Facebook
    </a>
  </div>
  <footer>
    <div class="footer-section">
      <div class="footer-column">
        <h2>About MSTV</h2>
        <p>MSTV Network is a non-profit platform offering free access to live TV channels...</p>
        <h3>Disclaimer</h3>
        <p>MSTV provides access to publicly available channels... not responsible for external content.</p>
        <h4>Terms of Service</h4>
        <p>By using MSTV Network, you agree to our terms...</p>
      </div>
      <div class="footer-column">
        <h2>Contact</h2>
        <p>Email: contact@mstvindia.com</p>
        <p>Phone: +001-305-242-4447</p>
      </div>
    </div>
    <div class="copyright">Â© 2025 MSTV INDIA. All rights reserved.</div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const select = document.getElementById('channel-select');
    const videoPlayer = document.getElementById('video-player');
    const iframePlayer = document.getElementById('media-player');
    const placeholder = document.getElementById('placeholder-image');
    const loading = document.getElementById('loading');
    let hlsInstance = null;
    let channelsData = [];
    let lastKnownJsonContent = null;
    function showLoading(show) {
      loading.style.display = show ? 'block' : 'none';
    }
    function stopAllPlayback() {
      if (hlsInstance) {
        hlsInstance.destroy();
        hlsInstance = null;
      }
      videoPlayer.pause();
      videoPlayer.removeAttribute('src');
      videoPlayer.load();
      videoPlayer.style.display = 'none';
      iframePlayer.src = '';
      iframePlayer.style.display = 'none';
    }
    function playChannel(channel) {
      showLoading(true);
      placeholder.style.display = 'none';
      stopAllPlayback();
      if (!channel || !channel.url) {
        placeholder.style.display = 'block';
        showLoading(false);
        return;
      }
      if (channel.type === 'hls') {
        if (Hls.isSupported()) {
          videoPlayer.style.display = 'block';
          videoPlayer.muted = false;
          videoPlayer.volume = 1;
          hlsInstance = new Hls();
          hlsInstance.loadSource(channel.url);
          hlsInstance.attachMedia(videoPlayer);
          hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => {
            videoPlayer.play();
            showLoading(false);
          });
        } else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
          videoPlayer.src = channel.url;
          videoPlayer.style.display = 'block';
          videoPlayer.muted = false;
          videoPlayer.play().then(() => {
            showLoading(false);
          }).catch(() => {
            placeholder.style.display = 'block';
            showLoading(false);
          });
        } else {
          placeholder.style.display = 'block';
          showLoading(false);
        }
      } else if (channel.type === 'iframe') {
        iframePlayer.src = channel.url;
        iframePlayer.style.display = 'block';
        showLoading(false);
      }
    }
    async function fetchChannelsJson() {
      try {
        const response = await fetch('channels.json?t=' + Date.now());
        if (!response.ok) throw new Error('Fetch failed');
        const json = await response.json();
        const jsonString = JSON.stringify(json);
        if (lastKnownJsonContent !== jsonString) {
          lastKnownJsonContent = jsonString;
          channelsData = json;
          select.innerHTML = '<option value="">ðŸ‘‰ðŸ“ºðŸ“ºðŸ“º</option>';
          channelsData.forEach((channel, index) => {
            const option = document.createElement('option');
            option.value = index;
            option.textContent = channel.name;
            select.appendChild(option);
          });
          const lastSelected = localStorage.getItem('lastChannelIndex');
          const indexToPlay = lastSelected && channelsData[lastSelected] ? lastSelected : 0;
          select.value = indexToPlay;
          playChannel(channelsData[indexToPlay]);
        }
      } catch (e) {
        console.error('Error fetching channels.json:', e);
      }
    }
    select.addEventListener('change', () => {
      const index = select.value;
      if (index === '') {
        playChannel(null);
        localStorage.removeItem('lastChannelIndex');
      } else {
        localStorage.setItem('lastChannelIndex', index);
        playChannel(channelsData[index]);
      }
    });
    fetchChannelsJson();
    setInterval(fetchChannelsJson, 5000);
  </script>
</body>
</html>
